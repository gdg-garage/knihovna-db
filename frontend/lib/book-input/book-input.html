<!-- import polymer-element's definition -->
<link rel="import" href="../../../packages/polymer/polymer.html">
<link rel="import" href="../../../packages/core_elements/core_ajax_dart.html">
<link rel="import" href="../../../packages/core_elements/core_a11y_keys.html">
<link rel="import" href="../../../packages/paper_elements/paper_input.html">
<link rel="import" href="../../../packages/paper_elements/paper_toast.html">
<link rel="import" href="book-autocomplete-list.html">

<polymer-element name="book-input">
  <template>
    <style>
      :host {
        display: block;
        max-width: 500px;
        margin: 0 auto;
      }

      #wrapper {
          padding: 0 10px;
      }

      paper-input {
        width: 100%;
        font-size: 150%;
        color: #03A9F4;
        margin-bottom: 0;
      }

      paper-input /deep/ ::-webkit-input-placeholder {
          color: #03A9F4;
      }

      paper-input /deep/ ::-moz-placeholder {
          color: #03A9F4;
      }

      paper-input /deep/ :-ms-input-placeholder {
          color: #03A9F4;
      }

      paper-input /deep/ .label-text,
      paper-input /deep/ .error {
          color: #03A9F4;
      }

      paper-input /deep/ .unfocused-underline {
          background-color: #03A9F4;
      }

      paper-input[focused] /deep/ .floated-label .label-text {
          color: #03A9F4;
      }

      paper-input /deep/ .focused-underline {
          background-color: #03A9F4;
      }

      paper-input /deep/ .cursor {
          background-color: #03A9F4;
      }

      paper-input.invalid /deep/ .floated-label .label-text,
      paper-input /deep/ .error {
          color: #03A9F4;
      }

      paper-input.invalid /deep/ .focused-underline,
      paper-input.invalid /deep/ .cursor {
          background-color: #03A9F4;
      }

      paper-progress {
        width: 100%;
        margin-top: 0;
      }
    </style>

    <core-ajax-dart id="ajax"
                    url="/autocomplete/suggestions.json"
                    handleAs="json"></core-ajax-dart>
      <!--url="../../../packages/knihovna_frontend/book-input/mock_response.json"-->

    <core-a11y-keys target="{{}}"
                    keys="up"
                    on-keys-pressed="{{selectUp}}"></core-a11y-keys>

    <core-a11y-keys target="{{}}"
                    keys="down"
                    on-keys-pressed="{{selectDown}}"></core-a11y-keys>

    <core-a11y-keys target="{{}}"
                    keys="enter"
                    on-keys-pressed="{{handleEnterPressed}}"></core-a11y-keys>

    <paper-toast id="enter-toast"
                 text="Vyberte si jednu z knížek a klikněte na ni.">
    </paper-toast>

    <div id="wrapper">
        <paper-input id="searchbox" label="Oblíbená knížka"
                     on-input="{{handleChange}}"
                     autofocus
                     floatingLabel></paper-input>
        <book-autocomplete-list id="suggestion-list"></book-autocomplete-list>
    </div>
  </template>
  <script type="application/dart" src="book_input.dart"></script>
</polymer-element>

